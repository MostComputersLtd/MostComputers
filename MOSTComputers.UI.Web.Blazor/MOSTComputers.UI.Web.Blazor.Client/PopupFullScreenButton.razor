
<button type="button" title="Fullscreen" class="border-0 btn d-flex justify-content-center align-items-center"
	style="color: inherit; box-shadow: none !important" @onclick="OnClick">
	
	@if (_isInFullScreen)
	{
		<svg width="@Width"
			height="@Height"
			viewBox="0 0 24 24"
			fill="none"
			stroke="currentColor"
			stroke-width="2"
			stroke-linecap="round"
			stroke-linejoin="round"
			@attributes="AdditionalAttributes"
			xmlns="http://www.w3.org/2000/svg">
			<path d="M9 5v4H5M15 5v4h4M9 19v-4H5M15 19v-4h4" />
		</svg>
	}
	else
	{
		<svg width="@Width"
			height="@Height"
			viewBox="0 0 24 24"
			fill="none"
			stroke="currentColor"
			stroke-width="2"
			stroke-linecap="round"
			stroke-linejoin="round"
			@attributes="AdditionalAttributes"
			xmlns="http://www.w3.org/2000/svg">
			<path d="M9 3H5a2 2 0 0 0-2 2v4M15 3h4a2 2 0 0 1 2 2v4M9 21H5a2 2 0 0 1-2-2v-4M15 21h4a2 2 0 0 0 2-2v-4" />
		</svg>
	}
</button>

@code {
	private Popup.MarginOptions? _originalMarginOptions = null;

	[Parameter, EditorRequired] public Popup.PopupContext PopupContext { get; set; }

	[Parameter] public string Width { get; set; } = "1em";
	[Parameter] public string Height { get; set; } = "1em";

	[Parameter] public Dictionary<string, object> AdditionalAttributes { get; set; } = new();

	private bool _isInFullScreen { get; set; }

	private void OnClick()
	{
		if (_isInFullScreen && _originalMarginOptions is not null)
		{
			PopupContext.SetMarginOptions(_originalMarginOptions);

			_isInFullScreen = false;

			return;
		}

		_originalMarginOptions = PopupContext.MarginOptions;

		PopupContext.SetMarginOptions(new() { Left = "0px", Right = "0px", Top = "0px", Bottom = "0px", });

		_isInFullScreen = true;
	}
}